<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Redlife</title>
  
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- CSS includes -->
    <!-- Do not modify this include list -->
    <link href="bootstrap.css" rel="stylesheet">
   
    <link href="combined.css" rel="stylesheet">
    
    <link href="combined-cleaned.css" rel="stylesheet">
    <link href="hover.min.css" rel="stylesheet"> 
    <link href="bbpublic.css" rel="stylesheet" type="text/css">
    <link href="chat.css" rel="stylesheet">
          <!-- Responsive -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
          <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    
          <script async="" src="//www.google-analytics.com/analytics.js"></script><script src="jquery-1.11.1.min.js"></script>
          <script language="JavaScript" type="text/javascript" src="utilityFunctions.js"></script>
          <script src="portalBBpublic.js" type="text/javascript"></script>
          <link rel="stylesheet" href="jquery-ui.min.css">
    
          <script src="jquery-uimin.js"></script>
                  
         <style>
      
     
  .darkbg1{
  background-color:  #c0c0c0;
  border-bottom-color: #be232b;
  
  color: #81181d;
  }
  .darkbg2{
  background-color:;
  border-top-color: #be232b;
  color: yellow;
  }
   .darkbg3{
  background-color: #666666;
  border-top-color: #be232b;
  color: yellow;
  }
  .darkbg4 {
  background-color: ;
  border-top-color: #be232b;
  color: #ff0000;
  
  }
  </style>
  
   
   <style>
   #emptyBox{
   display: block;
   height: 100px;
   }
   #bBDate{
  display: block;
  width: 70%;
  height: 34px;
  padding: 6px 12px;
  font-size: 14px;
  line-height: 1.42857143;
  color: #555;
  background-color: #fff;
  background-image: none;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  }
    .panel > .panel-heading {
      background-image: none;
      background-color: #bf2229;
      color: white;
   
   
   }
  /*  #example-table td:nth-child(2)  ,
   #example-table td:nth-child(3)  
   {white-space: nowrap;}
   .options{
   z-index:10;
   position:absolute;
   } */
   .options a{
    color:black;
    border-bottom: 1px solid black;
   font-weight: initial;
    font-size: 16px;
  }
   .options a#myLink::before{
    display:none;
   
  }
  
  .options{
    background-color:white;
  }
  
  
 
   </style>
  <style type="text/css">.fancybox-margin{margin-right:0px;}</style></head>
  
  
  <body onload="initCamp();">
  
  
  
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
           <!-- Main Header -->
        
           <!--Navigation Bar-->
  <nav class="navbar navbar-expand-lg bg-light">
    <div class="container-fluid">
      <img src="logo.png" width="65px" height="50px" alt="">
      <a class="navbar-brand" style="font-size: 30px; color: black;" href="index.html">Redlife</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" style="color:black;font-size: 17px" href="about.html" role="button"
              data-bs-toggle="dropdown" aria-expanded="false">
              About us
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="index.html">Home</a></li>
              <li><a class="dropdown-item" href="gallery.html">Gallery</a></li>

              
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" style="color:black;font-size: 17px" href="looking_blood.html"
              role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Looking for Blood
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="BloodAvailability.html">Blood availability</a></li>
              <!--<li><a class="dropdown-item" href="#">Blood bank directory</a></li>-->
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" style="color:black;font-size: 17px" href="donate_blood.html"
              role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Donate Blood
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="donorlogin.html">Donor Registration</a></li>
              <li><a class="dropdown-item" href="BloodDonationCamps.html">Blood donation camps</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" style="color:black;font-size: 17px" href="#" role="button"
              data-bs-toggle="dropdown" aria-expanded="false">
              Blood bank login
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="AddBloodBank.html">Add your Blood bank </a></li>

            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!--End of Navigation Bar-->
           
  
    <title>Camp Schedule </title>
    <meta name="description" content="Register as a voluntary donor in the blood donation camps currently happening in India.you can search for camps location wise and blood bank-wise.">
    
  
  
  <div class="container wrapper">
  <div class="page-header">
    <h3 class="text-danger">Camp Schedule</h3>
  </div>
  <div class="panel panel-danger">
    <div class="panel-heading">Camp Schedules</div>
    <div class="panel-body">
      
  
  <div class="row">
  <div>
  
  
  
  <!-- <h5 id='advanceSearch' align="left"><kbd>Show Advance Search&nbsp;<i id='advanceSearchArrow' class="fa fa-angle-double-down " aria-hidden="true"></i></kbd></h6>
   -->
  
  </div>
  </div>
  
  
  <div id="advanceSearchMenu" style="" class="row">
  
  
  <div class="col-md-2">
  <select id="donorAddStateCode" class="form-control" onchange="loadDistrictList(this.value)"><option value="-99">Select State</option><option value="35">Andaman &amp; Nicobar Islands</option><option value="28">Andhra Pradesh</option><option value="12">Arunachal Pradesh</option><option value="18">Assam</option><option value="10">Bihar</option><option value="94">Chandigarh</option><option value="22">Chhattisgarh</option><option value="26">Dadra &amp; Nagar Haveli</option><option value="25">Daman &amp; Diu</option><option value="97">Delhi</option><option value="30">Goa</option><option value="24">Gujarat</option><option value="96">Haryana</option><option value="92">Himachal Pradesh</option><option value="91">Jammu and Kashmir</option><option value="20">Jharkhand</option><option value="29">Karnataka</option><option value="32">Kerala</option><option value="37">Ladakh</option><option value="31">Lakshadweep</option><option value="23">Madhya Pradesh</option><option value="27">Maharashtra</option><option value="14">Manipur</option><option value="17">Meghalaya</option><option value="15">Mizoram</option><option value="13">Nagaland</option><option value="21">Odisha</option><option value="34">Puducherry</option><option value="93">Punjab</option><option value="98">Rajasthan</option><option value="11">Sikkim</option><option value="33">Tamil Nadu</option><option value="36">Telangana</option><option value="16">Tripura</option><option value="95">Uttarakhand</option><option value="99">Uttar Pradesh</option><option value="19">West Bengal</option></select>
  <div align="center">
  
  
                      <div id="enterstate" style="display:none;">
                        <h4 class="text-danger">Please enter state</h4>
                      </div>
                    </div>
                    
                    
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- <select id="abc" class="form-control" onchange="loadDistrictList(this.value)" -->
  <!-- 							> -->
  <!-- 							<option value="-1">Select State</option> -->
  
  
  <!-- 								<options -->
  
  <!-- 									property="value" labelProperty="label" /> -->
  
  <!-- 						</select> -->
  </div>			 
  
  <div class="col-md-2 ">
 
  <select id="distList" class="form-control" onchange="setDistrictCode(this.value)">
  <option value="-1">All District</option>
  </select>
  </div>
  <div class="col-md-3">
  
  <input type="date" id="bBDate" name="" required="" min="2022-10-27">
  
  </div>
 
  
  <div class="col-md-2">
  <button type="button" class="btn btn-danger" onclick="getBloodBankList()">Search</button>
  </div>
  
  <!-- <a id='frame' href='https://calendar.google.com/calendar/embed?src=dhe4otegup82v2pvo09ulrhpsk%40group.calendar.google.com&ctz=Asia/Calcutta' class='fancybox.iframe'><i class='fa fa-calendar'></i></a> -->
  <br>
  <br>
  
  </div>
  
  </div>
  </div>
  
  
   <div id="emptyBox">
  
  
  
  </div>
  
  
  <div class="row" id="newbblist" hidden="">
  <div id="bblist">
  <h5 align="right"><span id="latlon" class="label label-info">Loading List</span></h5>
  <h5 align="right"><span id="currentLocation" class="label label-info"></span></h5>
  <!-- <p id="latlon"></p> -->
  </div>
  
  
  
  <table id="example-table" class="table table-bordered table-hover ">
    <thead class="bgtablered">
   
    <tr>
    <th>S.No.</th>
      <th>Date</th> 
      <th>Camp Name</th>
      <th>Address</th>
      <th>State</th>
      <th>District</th>
      <th>Contact</th>
      <th>Conducted By</th>
      <th>Organized by</th>
     <th>Register</th>
       <th>Time</th>   
      </tr>
     
     
    </thead>
    <tbody>
    </tbody>
    <tfoot>
     <tr>
    <th></th>
      <th></th>
      <th></th>   
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th> </th>
      <th> </th>
      <th></th>
      </tr>
     </tfoot>
      
  </table>
  </div>
   <div class="push"></div>
  </div>
  
 
       <style>
  #mylink:hover{
    background-color: yellow;
    color: black;
  }
  #mylink2:hover{
  background-color: yellow;
  }
    
  </style>
  <hr>
  <!--Footer-->
  <div class="footer-clean">
    <footer>
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-sm-4 col-md-3 item">
            <h3>About us</h3>
            <ul>
              <li><a href="#">Home</a></li>
              <li><a href="gallery.html">Gallery</a></li>
              
            </ul>
          </div>
          <div class="col-sm-4 col-md-3 item">
            <h3>Want Blood</h3>
            <ul>
              <li><a href="BloodAvailability.html">Blood availability</a></li>

            </ul>
          </div>

          <div class="col-sm-4 col-md-3 item">
            <h3>Donate Blood</h3>
            <ul>
              <li><a href="donorlogin.html">Donor Registration</a></li>
              <li><a href="BloodDonationCamps.html">Blood donation camps</a></li>
            </ul>
          </div>
          <div class="col-sm-4 col-md-3 item">
            <h3>24/7 Helpline</h3>
            <ul>
              <li><a href="https://mail.google.com/mail/">redlife324@gmail.com</a></li>
              <li><a href="#">toll-free: 1800-372-344</a></li>
              <li><a href="#">6700-948-434</a></li>
            </ul>
          </div>

        </div>
      </div>
    </footer>

     <!-- CHAT BAR BLOCK -->
  <div class="chat-bar-collapsible">
    <button id="chat-button" type="button" class="collapsible">24/7 chat support!!
      <i id="chat-icon" style="color: #fff;" class="fa fa-fw fa-comments-o"></i>
    </button>

    <div class="content">
      <div class="full-chat-block">
        <!-- Message Container -->
        <div class="outer-container">
          <div class="chat-container">
            <!-- Messages -->
            <div id="chatbox">
              <h5 id="chat-timestamp"></h5>
              <p id="botStarterMessage" class="botText"><span>Loading...</span></p>
            </div>

            <!-- User input box -->
            <div class="chat-bar-input-block">
              <div id="userInput">
                <input id="textInput" class="input-box" type="text" name="msg"
                  placeholder="Tap 'Enter' to send a message">
                <p></p>
              </div>

              <div class="chat-bar-icons">
                <i id="chat-icon" style="color: crimson;" class="fa fa-fw fa-heart" onclick="heartButton()"></i>
                <i id="chat-icon" style="color: #333;" class="fa fa-fw fa-send" onclick="sendButton()"></i>
              </div>
            </div>

            <div id="chat-bar-bottom">
              <p></p>
            </div>

          </div>
        </div>

      </div>
    </div>

  </div>
  <!--End Of ChatBot-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="responses.js"></script>
  <script src="chat.js"></script>
  <!-- <div id='socialShare'>
  </div> -->
  <input type="hidden" name="stateList" value="1">
  <input type="hidden" name="hmode" value="">
  <input type="hidden" id="dCode" name="districtCode" value="-1">
  <input type="hidden" id="sCode" name="stateCode" value="-1">
  <input type="hidden" id="lat" name="latitude" value="-1">
  <input type="hidden" id="lon" name="longitude" value="-1">
  <input type="hidden" id="searchMode" name="searchMode" value="2">
  <input type="hidden" id="searchString" name="searchString" value="-1">
  <script src="../../hisglobal/bbpublic/assets/elements/js/jquery.fancybox.pack.js" async=""></script> 
  <!-- Do not modify this include list -->
   <script src="bootstrap.min.js"></script>
  <!-- <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script> -->
  
  
        <script src="wow.js"></script>
        <script src="script.js"></script>
         <script src="../hisglobal/bbpublic/assets/js/modernizr-custom.js"></script>
         
         <script type="text/javascript">
      
  
         
       var transformZoom = 1;
         var cssZoom = 100;
  
         
         
         $('.make_greater').click(function() {
         //alert('hello');
           var step;
  
           if (Modernizr.testProp('zoom') === true) {
         
             step = 5;
             cssZoom += step;
             $('body').css('zoom', ' ' + cssZoom + '%');
           } else {
             console.log('no css zoom');
             step = 0.05;
             transformZoom += step;
           
             $('html').css('MozTransform', 'scale(' + transformZoom + ',' + transformZoom + ')');
             $('html').css('transform-origin', 'top center');
           }
         });
         
         
         
  
         $('.make_smaller').click(function() {
           var step;
           
           if (Modernizr.testProp('zoom') === true) {
             console.log('CSS zoom supported');
  
             step = 5;
             cssZoom -= step;
             $('body').css('zoom', ' ' + cssZoom + '%');
           } else {
             console.log('no css zoom');
             step = 0.05;
             transformZoom -= step;
             $('html').css('MozTransform', 'scale(' + transformZoom + ',' + transformZoom + ')');
         console.log('no css zoom 1');
             $('html').css('transform-origin', 'top center');
         console.log('no css zoom 2');
           }
         });
         
         
         $('#reset').click(function(){  
           
           cssZoom = 100;
          if (Modernizr.testProp('zoom') === true) {
            $('body').css('zoom', ' ' + 100 + '%');
            }
           else 
           {
               console.log('no css zoom');
              transformZoom = 1;
              $('html').css('MozTransform', 'scale(' + 1 + ',' + 1 + ')');
               $('html').css('transform-origin', 'top center');
             }
          console.log('cssZoom');
         });
  
  $("#dark").click(function(){ 
     
       $("section").toggleClass("darkbg1");
       $("header").toggleClass("darkbg1");
       $("ul").toggleClass("darkbg1");
       $("li").toggleClass("darkbg1");
       $("a").toggleClass("darkbg2");
        $("hr").toggleClass("darkbg2");
        $("td").toggleClass("darkbg3");
        
    $(".toggle1").toggleClass("darkbg1");
    $(".toggle2").toggleClass("darkbg2");
    $("body").toggleClass("darkbg1");
  //$(".toggle3").toggleClass("darkbg3");
  
    
    
  });
  
  
  
  $(function(){
    $('a[href^="http"]').each(function() {
      $(this).on('click',function(){ return external_link()}); 
    });
    
    
  });
  
  function external_link() {
      return 1 == confirm('YouÂ’re about to leave www.eRaktKosh.in.\nThis is a link to external website/content. This site does not belong to eRaktkosh and hence eRaktkosh shall not be liable in any case.\nPlease Continue at your own risk.') ? !0 : !1
    }
  $.urlParam = function(name){
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        if (results==null){
           return null;
        }
        else{
           return results[1] || 0;
        }
    }
  </script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-73827792-1', 'auto');
  ga('send', 'pageview');
  </script>	
   
  <script src="../hisglobal/bbpublic/assets/js/jquery.floating-social-share.min1.js"></script>
  <script src="../hisglobal/bbpublic/assets/datatables/js/jquery.dataTables.min.js"></script>
  <script src="../hisglobal/bbpublic/assets/js/fnReloadAjax.js"></script>
  <script src="../hisglobal/bbpublic/assets/js/bootstrap.min.js"></script>
  <!-- <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places"
          async defer></script> -->
  <script src="../hisglobal/bbpublic/assets/datatables/js/dataTables.fixedHeader.min.js"></script>
  <script src="../hisglobal/bbpublic/assets/datatables/js/dataTables.responsive.min.js"></script>
  <script src="../hisglobal/bbpublic/assets/js/jquery.easy-autocomplete.min.js"></script>    
  <script src="../hisglobal/bbpublic/assets/elements/js/jquery.fancybox.pack.js" async=""></script>
  <script src="../hisglobal/bbpublic/assets/elements/js/ouical.js" async=""></script>
  
  
  
  
  
  <script>
  function handleClick(obj){
    
    var name=obj.name;
    console.log(name);
    console.log(obj.getAttribute('ev'));
    checkedProperty=!(obj.getAttribute('ev')=='true');
    var elem=document.getElementsByName(name);
    for(i=0;i<elem.length;i++)
    
      {
        elem[i].checked=false;
      }
    obj.checked=checkedProperty;
    obj.setAttribute("ev",checkedProperty);
    console.log("checked property "+checkedProperty);
    console.log("obj checked "+obj.checked);
  }
  function AddCalander(obj)
  {
  obj.removeAttribute("onmouseover");
  var Title=$(obj).closest('tr').children('td')[3].textContent;
  var date=$(obj).closest('tr').children('td')[1].textContent;
  var time=$(obj).closest('tr').children('td')[2].textContent;
  var address=$(obj).closest('tr').children('td')[4].textContent;
  var conductedBy=$(obj).closest('tr').children('td')[8].textContent;
  var timeSplit=time.split('-');
  var objDateArray=date.split("-");
  var dateForData=objDateArray[1]+" "+objDateArray[0]+", "+objDateArray[2]+" "+timeSplit[0]+":00";
  var dateForDataEnd=objDateArray[1]+" "+objDateArray[0]+", "+objDateArray[2]+" "+timeSplit[1]+":00";
  var description="A Camp Named '"+Title+"' is conducted by "+conductedBy+" at "+address+".Donate Blood and become a savior of life.";
        var myCalendar = createCalendar({
          options: {
            class: 'options',
            id: obj.id                              
          },
          data: {
            title: Title,     // Event title
            start: new Date(dateForData),   // Event start date
            duration: 120,                            // Event duration (IN MINUTES)
            end: new Date(dateForDataEnd),     // You can also choose to set an end time.
            address: address,
            description: description
          }
        })
       
  
      
        obj.appendChild(myCalendar);
       }
  function appendSelect(obj)
  {
    
    obj
    .api()
    .columns()
    .every(
        function() {
          var column = this;
          var colIdx = column
              .index();
  
          if (colIdx==0||colIdx==2||colIdx==7||colIdx==9||colIdx==4||colIdx==3
              )
            return;
          var select = $(
              '<select style="width:100%"><option value="">All</option></select>')
              .appendTo(
                  $(
                      column
                          .footer())
                      .empty())
              .on(
                  'change',
                  function() {
                    if(colIdx!=1){
                      
                    var val = $.fn.dataTable.util
                        .escapeRegex($(
                            this)
                            .val());
                    }
                    else
                      {
                      var val=$(this).val().substring(0,11);
                  
                      }
                    console.log("value is "+val);
                    column
                        .search(
                            val ,
                            false,
                            true)
                        .draw();
                  });
  
          column
              .data()
              .unique()
              .sort()
              .each(
                  function(
                      d,
                      j) {
                    
                      
                      select
                      .append('<option value="'+d+'">'
                          + d
                          + '</option>')
                      
                    
                  });
        });
    
    $("#frame").fancybox({
        'width'         : '75%',
        'height'        : '75%',
        'autoScale'     : false,
        'transitionIn'  : 'none',
        'transitionOut' : 'none',
        'type'          : 'iframe'
    });
    
  }
  $(document)
  .ready(
      
      function() {
      
  
        const date = new Date();
         document.getElementById("bBDate").valueAsDate= date;
          document.getElementById("bBDate").min = new Date().getFullYear() + "-" +  parseInt(new Date().getMonth() + 1 ) + "-" + new Date().getDate()
       
    
         $("#advanceSearchMenu").slideToggle();
              $("#advanceSearchArrow").toggleClass('fa-angle-double-down  fa-angle-double-up ');
              $(".easy-autocomplete").removeAttr('style');
    
      
       
        var stateCode = $('#sCode').val();
        var districtCode = $('#dCode').val();
  
           if(stateCode!='-1')
         {
        var table = $('#example-table')
            .DataTable(
                {
                  initComplete : function() {
                    appendSelect(this);
                    },
                    "ajax":"/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETNEARBYCAMPS&stateCode=-1&districtCode=-1",
                  "aLengthMenu" : [
                      [ 4, 10, 20, 50, 75, -1 ],
                      [ 4, 10, 20, 50, 75, "All" ] ],
                  "pageLength" : 4,
                  "responsive":true,
                  "columnDefs": [
                                   { "targets": [1,9], "orderable": false }
                                 ],
                  
                    "order": [[ 0, 'asc' ]]
                }
                
  
            );
  
        }
  
      });
  var SearchEnum = Object.freeze({CURRENTLOCATION: 1, DROPDOWN: 2, LOCATIONBOX: 3, BBNAME: 4});
  var x = document.getElementById("latlon");
  
  // var x1 = document.getElementById("alertText");
  $(document).ready(function() {
    $(document).on('click', function(){
      $("[name='add-to-calendar-checkbox']").each(function(){
        $(this).prop('checked', false);
      }
          )
      
    });
    
     $(".close").click(function(){
            $('#alertBox').alert('close');
        });
    
      $("#searchButton").click(function() {
          $('html, body').animate({
              scrollTop: $("#bblist").offset().top
          }, 2000);
      }); 
     
     
     var options = {
          url: "/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETAUTOCOMPLETEDATA",
  
          getValue: "name",
          requestDelay: 500,
          list: {
            match: {
              enabled: true
            },
            onChooseEvent: function() {
        var value = $("#txtBbname").getSelectedItemData().code;
        //alert(value);
        $("#searchString").val(value);
        setSearchMode(SearchEnum.BBNAME);
      },
      showAnimation: {
        type: "fade", //normal|slide|fade
        time: 400,
        callback: function() {}
      },
  
      hideAnimation: {
        type: "slide", //normal|slide|fade
        time: 400,
        callback: function() {}
      }
      
     
          }
        };
  
        $("#txtBbname").easyAutocomplete(options);
  
        getState(1);
    });
    
  function getLatLonCampList(lat, lon)
  {		
    var table;
    if ( $.fn.dataTable.isDataTable( '#example-table' ) ) {
      table = $('#example-table').dataTable();
      var newURL = "/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETNEARBYCAMPS&latitude="+lat+"&longitude="+lon;
      table.fnReloadAjax(newURL);
    }
    else {
      $('#example-table').DataTable( {
          "ajax": "/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETNEARBYCAMPS&latitude="+lat+"&longitude="+lon,
          "deferRender": true,
          "fixedHeader": true,
          "responsive":true,
          "aoColumns": [
                        null,
                        { "sType": "date-uk" },
                        null,
                        null,
                        null,
                        null,
                        null,
                        null
                    ]
      } );
      
  }
  }
  jQuery.extend( jQuery.fn.dataTableExt.oSort, {
    "date-uk-pre": function ( a ) {
        var ukDatea = a.split('-');
        return (ukDatea[2] + ukDatea[1] + ukDatea[0]) * 1;
    },
  
    "date-uk-asc": function ( a, b ) {
        return ((a < b) ? -1 : ((a > b) ? 1 : 0));
    },
  
    "date-uk-desc": function ( a, b ) {
        return ((a < b) ? 1 : ((a > b) ? -1 : 0));
    }
    } );
    
  function initCamp() {
    //var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('?');
    var hashes = window.location.href.split('?');
    //  alert(hashes.length);
    //  alert(hashes);
      if(hashes.length == 1) {
      
      }
  else 
    {
    //alert("here");
    getBloodBankListByURL(hashes.pop());
     x.innerHTML = "Results as per your selection";
       $('#lat').val("-1");
       $('#lon').val("-1");
    }
      initAutocomplete();
    //google.maps.event.addDomListener(window, 'load', initialize);	
  
  }
  function getLocation(){
    if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else { 
          x.innerHTML = "Geolocation is not supported by this browser.";
          $('#lat').val("-1");
          $('#lon').val("-1");
      }
  }
  function showPosition(position) {
  
     var lat = position.coords.latitude;
          var lon = position.coords.longitude;
      $('#lat').val(lat);
      $('#lon').val(lon);
      setSearchMode(SearchEnum.CURRENTLOCATION);
    
          
    getLatLonCampList(lat, lon);	
    
    x.innerHTML = "Showing Blood Banks within a radius of 30KM from your current location";
 
      
      
  }
  
  function showError(error) {
    var txt;
      switch(error.code) {
          case error.PERMISSION_DENIED:
              x.innerHTML = "User denied the request for Geolocation."
              txt = "User denied the request for Geolocation.";
              break;
          case error.POSITION_UNAVAILABLE:
              x.innerHTML = "Location information is unavailable."
              txt = "Location information is unavailable.";
              break;
          case error.TIMEOUT:
              x.innerHTML = "The request to get user location timed out."
              txt = "The request to get user location timed out.";
              break;
          case error.UNKNOWN_ERROR:
              x.innerHTML = "An unknown error occurred."
              txt = "An unknown error occurred.";
              break;
      }
 
      $('#lat').val("-1");
      $('#lon').val("-1");
  }
  
  function loadDistrictList(stateCode)
  {
    
      $('#dCode').val("-1");
    $('#sCode').val(stateCode);
    setSearchMode(SearchEnum.DROPDOWN);
    $.getJSON("/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETDISTRICTLIST",{selectedStateCode:stateCode}, function(data) {
        $("#distList option").not(':first').remove(); // Remove all <option> child tags.
       // console.log(data);
        $.each(data.records, function(index, item) { // Iterates through a collection
            $("#distList").append( // Append an object to the inside of the select box
                $("<option></option>") 
                    .text(item.id)
                    .val(item.value)
            );
        });
    });	
  }
  
  function setDistrictCode(districtCode)
  {
    $('#dCode').val(districtCode);	
   
  }
  function getBloodBankListByURL(url)
  {
   
     
      
    var newUrl = '/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=' + url;;
    
    var table;
    if ( $.fn.dataTable.isDataTable( '#example-table' ) ) {
      table = $('#example-table').dataTable();   
      table.fnReloadAjax(newUrl);
    }	
    else {
    
       $('#example-table').DataTable( {
              "ajax": newUrl,
              "deferRender": true,
              "fixedHeader": true,
              "responsive":true
          } );
    }
    }
  function getBloodBankList()
  { 
     
     
     
        $("#enterstate").hide();
    if (document.getElementById('donorAddStateCode').value=="-99")
      {
       $("#enterstate").show();
        document.getElementsByName("state")[0].focus();
        return false;
      }
     
     
     
     
     
     
     
     
     
     
     
     
     
        document.getElementById("emptyBox").style.display = "none";  
    var p = document.getElementById('newbblist');
    p.removeAttribute("hidden");
    var campDate=document.getElementById("bBDate").value;
   // alert(campDate);
    if(campDate===undefined||campDate===null||campDate===''||campDate==="null")
    { campDate=new Date();
    document.getElementById("bBDate").valueAsDate = new Date();
     }
    
    //alert(campDate)
    var stateCode = $('#sCode').val();
    var districtCode = $('#dCode').val();
     
    var mode = $('#searchMode').val();	
  
    if( mode == SearchEnum.DROPDOWN)
    {
      var table;
      if ( $.fn.dataTable.isDataTable( '#example-table' ) ) {
        table = $('#example-table').dataTable();
        var newUrl = '/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETNEARBYCAMPS&stateCode='+stateCode+'&districtCode='+districtCode+'&campDate='+campDate;
        table.fnReloadAjax(newUrl);
        table = $('#example-table').dataTable();
        
      }	
      else {
    
         $('#example-table').DataTable( {
                "ajax": "/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETNEARBYCAMPS&stateCode="+stateCode+"&districtCode="+districtCode+'&campDate='+campDate,
                "deferRender": true,
                "fixedHeader": true,
                "responsive":true
            } );
      }
    x.innerHTML = "Showing Blood Banks as per the selection from the list";
  }
  else if(mode == SearchEnum.CURRENTLOCATION || mode == SearchEnum.LOCATIONBOX)
    {
      var lat = $('#lat').val();
        var lon = $('#lon').val();
  
      getLatLonCampList(lat, lon);
      x.innerHTML = "Showing Blood Banks within a radius of 30KM from the selected location";
    }
  else if(mode == SearchEnum.BBNAME)
  {
    var searchString = $('#searchString').val();
    var table;
    if ( $.fn.dataTable.isDataTable( '#example-table' ) ) {
      table = $('#example-table').dataTable();
      var newUrl = '/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETNEARBYCAMPS&hospitalCode=' + searchString;
      table.fnReloadAjax(newUrl);
      $("#my-datatable").dataTable()
    }	
    
    else {
    
       $('#example-table').DataTable( {
              "ajax": "/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETNEARBYCAMPS&hospitalCode=" +searchString,
              "deferRender": true,
              "fixedHeader": true,
              "responsive": true
          } );
    }
  
  }
  
    
  }
  
   
    function geocodeLatLng(lat,lon) {
       var geocoder = new google.maps.Geocoder;
      var latlng = {lat: parseFloat(lat), lng: parseFloat(lon)};
      geocoder.geocode({'location': latlng}, function(results, status) {
        if (status === google.maps.GeocoderStatus.OK) {
          if (results[1]) {
            //console.log(results[1]);
            x.innerHTML= "Current Location: " + results[1].formatted_address;
          } else {
            window.alert('No results found');
          }
        } else {
          window.alert('Geocoder failed due to: ' + status);
        }
      });
  }
    
    function initMap() {
      
      }
    
    var placeSearch, autocomplete;
  
  
  function geoCodeAddress()
  {
    var geocoder = new google.maps.Geocoder();
    var address = document.getElementById('address').value;
    var loc = document.getElementById('Location');
    
    var map1 = new google.maps.Map(document.getElementById('map'), {
        zoom: 8,
        center: {lat: -34.397, lng: 150.644}
      });
    
    
    geocoder.geocode({'address': address}, function(results, status) {
        if (status === google.maps.GeocoderStatus.OK) {
          loc.innerHTML = results[0].geometry.location;
          map1.setCenter(results[0].geometry.location);
          map1.setZoom(15);
          var marker = new google.maps.Marker({
            map: map1,
            position: results[0].geometry.location
          });
        } else {
          alert('Geocode was not successful for the following reason: ' + status);
        }
      });
  }
  
  var placeSearch, autocomplete;
  var componentForm = {
    street_number: 'short_name',
    route: 'long_name',
    locality: 'long_name',
    administrative_area_level_1: 'short_name',
    country: 'long_name',
    postal_code: 'short_name'
  };
  
  function initAutocomplete() {
    // Create the autocomplete object, restricting the search to geographical
    // location types.
    autocomplete = new google.maps.places.Autocomplete(
        /** @type {!HTMLInputElement} */(document.getElementById('autocomplete')),
        {types: ['geocode']});
  
    // When the user selects an address from the dropdown, populate the address
    // fields in the form.
    autocomplete.addListener('place_changed', fillInAddress);
  }
  
    function fillInAddress() {
    // Get the place details from the autocomplete object.
    var place = autocomplete.getPlace();
  
  
   // alert(place.geometry.location.lng());
    $('#lat').val(place.geometry.location.lat());
    $('#lon').val(place.geometry.location.lng());
   
    setSearchMode(SearchEnum.LOCATIONBOX);
   
  }
  
  function setSearchMode(mode)
  {
     $('#searchMode').val(mode);
    // alert(mode);
    if(mode == SearchEnum.LOCATIONBOX || mode == SearchEnum.CURRENTLOCATION) {
      //Search by location box
      //reset search by state
    $('#donorAddStateCode').val("-1");
      $('#dCode').val("-1");
      $('#sCode').val("-1");
      $('#searchString').val("");
    
    }
    else if(mode == SearchEnum.DROPDOWN)
    {
      
      $('#lat').val("-1");
      $('#lon').val("-1");
      $('#autocomplete').val("");
      $('#searchString').val("");
    }
    else if(mode == SearchEnum.BBNAME)
    {
      $('#dCode').val("-1");
        $('#sCode').val("-1");
        $('#lat').val("-1");
        $('#lon').val("-1");
        $('#autocomplete').val("");
        
    }
    
  }
  
  function getState(stateListType)
  {
    $.getJSON("/BLDAHIMS/bloodbank/nearbyBB.cnt?hmode=GETSTATELIST&statetype="+ stateListType,		
         function(data) {
      var comboHtml = "";
      $.each(data, function(index, element) {
        $('#donorAddStateCode').append(new Option(element.label, element.value));
      });
    });
  }
  
  function geolocate() {
  //   if (navigator.geolocation) {
  //     navigator.geolocation.getCurrentPosition(function(position) {
  //       var geolocation = {
  //         lat: position.coords.latitude,
  //         lng: position.coords.longitude
  //       };
  //       var circle = new google.maps.Circle({
  //         center: geolocation,
  //         radius: position.coords.accuracy
  //       });
  //       autocomplete.setBounds(circle.getBounds());
  //     });
  //   }
  }
  
  </script><div class="betternet-wrapper"></div></body></html>